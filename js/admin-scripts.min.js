!function(e){var t=e(document);function s(t){var s=e(t).find("ul.tabs");s.length<=0||s.hasClass("tabs-init")||(s.addClass("tabs-init"),s.each(function(){var t,s,i=e(this).find("a");(t=e(i.filter('[href="'+location.hash+'"]')[0]||i[0])).addClass("current"),s=e(t[0].hash),i.not(t).each(function(){e(this.hash).hide()}),e(this).on("click","a",function(i){t.removeClass("current"),s.hide(),t=e(this),s=e(this.hash),t.addClass("current"),s.show(),i.preventDefault()})}))}function i(s){if("object"!=typeof s)return!1;if(void 0===s.event_type)return console.error("event_type is required by musicidb_shortcode_field_update"),!1;if(void 0===s.field_selector)return console.error("field_selector is required by musicidb_shortcode_field_update"),!1;if(void 0===s.shortcode_att)return console.error("shortcode_att is required by musicidb_shortcode_field_update"),!1;if(void 0===s.output_selector)return console.error("output_selector is required by musicidb_shortcode_field_update"),!1;s={event_type:s.event_type,field_selector:s.field_selector,shortcode_att:s.shortcode_att,output_selector:s.output_selector,handler:void 0===s.handler?"val":s.handler,callback:void 0===s.callback?null:s.callback};t.on(s.event_type,s.field_selector,function(t){var i=e(s.output_selector),o=i.val(),n=o;"function"==typeof s.handler?n=s.handler(s.shortcode_att,o,e(this)):"string"==typeof s.handler&&(n=function(e,t,s,i){return"val"!=e&&"checked"!=e?s:("val"==e?o=i.val():"checked"==e&&(o=i.prop("checked")),c(t,o,s));var o}(s.handler,s.shortcode_att,o,e(this))),"function"==typeof s.callback&&s.callback(n),i.val(n)})}function c(e,t,s){var i=s.length,c=i-1,o=new RegExp("\\s"+e+'="[^"]*"',"g");return s.indexOf(" "+e)>0&&""!=t?s.replace(o," "+e+'="'+t+'"'):""!=t?s.substring(0,c)+" "+e+'="'+t+'"'+s.substring(i-1):s.replace(o,"")}t.ready(function(){s(document),t.on("click","#musicidb-events-settings-sc .copyToClipboard",function(t){t.preventDefault();var s=e(".shortcode"),i=e(".shortcode-slider");s.select(),i.select();try{document.execCommand("copy")?e(".copySuccess").fadeIn().delay(200).fadeOut():e(".copyFail").fadeIn().delay(200).fadeOut()}catch(t){console.log(t),e(".copyFail").fadeIn().delay(200).fadeOut()}}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #themeSelect",shortcode_att:"theme",output_selector:"#musicidb-events-settings-sc .shortcode",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #idSelect",shortcode_att:"id",output_selector:"#musicidb-events-settings-sc .shortcode",handler:function(t,s,i){var o=i.find("input:checked"),n="";return o.length>0&&o.each(function(t){var s=e(this),i=s.val(),c=s.data("type");n+=c+":"+i,t<o.length-1&&(n+=",")}),c(t,n,s)}}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #buttonPositions",shortcode_att:"buttons",output_selector:"#musicidb-events-settings-sc .shortcode",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #showDesc",shortcode_att:"descrip",output_selector:"#musicidb-events-settings-sc .shortcode",handler:"checked"}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #displyImgs",shortcode_att:"display",output_selector:"#musicidb-events-settings-sc .shortcode",handler:function(e,t,s){return c(e,s.prop("checked")?"img":"text",t)}}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #defaultView",shortcode_att:"view",output_selector:"#musicidb-events-settings-sc .shortcode",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #largePicsOption",shortcode_att:"largepics",output_selector:"#musicidb-events-settings-sc .shortcode",handler:"checked"}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #showVenue",shortcode_att:"showvenue",output_selector:"#musicidb-events-settings-sc .shortcode",handler:"val"}),i({event_type:"change",shortcode_att:"showartist",field_selector:"#musicidb-events-settings-sc #showArtist",output_selector:"#musicidb-events-settings-sc .shortcode",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-sc #listStyleSelect",shortcode_att:"style",output_selector:"#musicidb-events-settings-sc .shortcode",handler:function(t,s,i){let o=i.val(),n="show",r="show",d=e("#showVenue"),l=e("#showArtist");switch(o){case"listwithpics":case"largepics":case"bigpics":case"full":n="hide",r="show";break;case"simple":case"compact":default:n="show",r="show"}return d.val(n),s=c("showvenue",n,s),l.val(r),s=c("showartist",r,s),c(t,o,s)}}),i({event_type:"change",field_selector:"#musicidb-events-settings-featured-slider #selected-venue",shortcode_att:"id",output_selector:"#musicidb-events-settings-featured-slider .shortcode-slider",handler:function(t,s,i){var o=i.find("input:checked"),n="";return o.length>0&&o.each(function(t){var s=e(this).val();n+=s,t<o.length-1&&(n+=",")}),c(t,n,s)}}),i({event_type:"change",field_selector:"#musicidb-events-settings-featured-slider #tickets-url",shortcode_att:"ticketDefault",output_selector:"#musicidb-events-settings-featured-slider .shortcode-slider",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-featured-slider #flag-text",shortcode_att:"leftFlag",output_selector:"#musicidb-events-settings-featured-slider .shortcode-slider",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-featured-slider #title-size",shortcode_att:"titleSize",output_selector:"#musicidb-events-settings-featured-slider .shortcode-slider",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-featured-slider #amount",shortcode_att:"numevents",output_selector:"#musicidb-events-settings-featured-slider .shortcode-slider",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-featured-slider #overlay",shortcode_att:"background",output_selector:"#musicidb-events-settings-featured-slider .shortcode-slider",handler:"val"}),i({event_type:"change",field_selector:"#musicidb-events-settings-featured-slider #fallback-image",shortcode_att:"fallbackImage",output_selector:"#musicidb-events-settings-featured-slider .shortcode-slider",handler:"val"});var o=e("#musiscidb-insert-shortcode");if(o.length>0){o.on("click",function(e){e.preventDefault(),tb_show("MusicIDB Shortcode Options",ajax_shortcode_options_url)}),t.on("click","#musicidb-events-settings-sc .insertShortcode",function(t){t.preventDefault();var s=e(this).data("target-class");if(void 0!==s)if(""!=s){var i=e(s="."+s);if(i.length>0){var c=i.val();wp.media.editor.insert(c),tb_remove()}}else console.error("target cannot be empty");else console.error("no target shortcode field supplied")});var n=e("#musicidb-events-settings").length>0;new MutationObserver(function(t){var i=e("#musicidb-events-settings");i.length<=0&&n?n=!1:i.length>0&&(n||(s("#musicidb-events-settings"),e("#TB_ajaxContent").css({width:"100%",height:"100%",padding:0}),e("#TB_window").css({overflow:"auto"})),n=!0)}).observe(document.body,{childList:!0})}})}(jQuery);